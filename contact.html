<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-DL47S18XCM"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-DL47S18XCM');
    </script>
    
    <title>ãŠå•ã„åˆã‚ã› | é«˜æ¾å¸‚ç«‹æ¡œç”ºä¸­å­¦æ ¡1976å¹´åº¦å’æ¥­åŒçª“ä¼š</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>ğŸŒ¸</text></svg>">
    <meta name="description" content="é«˜æ¾å¸‚ç«‹æ¡œç”ºä¸­å­¦æ ¡1976å¹´åº¦å’æ¥­åŒçª“ä¼šã¸ã®ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ã€‚å‚åŠ ç›¸è«‡ã€é€£çµ¡å…ˆå¤‰æ›´ã€å†™çœŸæä¾›ãªã©ã€ãŠæ°—è»½ã«ã”é€£çµ¡ãã ã•ã„ã€‚">
    <meta name="keywords" content="ãŠå•ã„åˆã‚ã›,é€£çµ¡å…ˆ,æ¡œç”ºä¸­å­¦æ ¡,1976å¹´åº¦,åŒçª“ä¼š,å‚åŠ ç›¸è«‡,é«˜æ¾">
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="https://sakuramachi1976.github.io/contact.html">
    <link rel="stylesheet" href="assets/css/styles.css">
    <script src="assets/js/firebase-config.js"></script>
    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <!-- EmailJS Configuration (é–‹ç™ºç’°å¢ƒã®ã¿ã€æœ¬ç•ªã§ã¯ç„¡è¦–ã•ã‚Œã‚‹) -->
    <script src="assets/js/emailjs-config.js" onerror="console.log('emailjs-config.js not found - using built-in production config')"></script>
    <!-- EmailJS Service -->
    <script src="assets/js/emailjs-service.js"></script>
</head>
<body>
    <header>
        <div class="container">
            <h1>é«˜æ¾å¸‚ç«‹æ¡œç”ºä¸­å­¦æ ¡1976å¹´åº¦å’æ¥­åŒçª“ä¼š</h1>
            <p class="subtitle">åŒçª“ç”Ÿã®çµ†ã‚’æ·±ã‚ã‚‹å ´æ‰€</p>
            <nav>
                <ul>
                    <li><a href="index.html">ãƒ›ãƒ¼ãƒ </a></li>
                    <li><a href="about.html">åŒçª“ä¼šã«ã¤ã„ã¦</a></li>
                    <li><a href="news.html">ãŠçŸ¥ã‚‰ã›ãƒ»ã‚¤ãƒ™ãƒ³ãƒˆ</a></li>
                    <li><a href="contact.html">ãŠå•ã„åˆã‚ã›</a></li>
                    <li><a href="members.html" class="members-link">ä¼šå“¡å°‚ç”¨ãƒšãƒ¼ã‚¸</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main class="page-content">
        <div class="container">
            <h1>ãŠå•ã„åˆã‚ã›</h1>
            
            <div class="content-section">
                <p>ã”è³ªå•ã‚„ã”è¦æœ›ãŒã”ã–ã„ã¾ã—ãŸã‚‰ã€ä¸‹è¨˜ãƒ•ã‚©ãƒ¼ãƒ ã‚ˆã‚ŠãŠæ°—è»½ã«ãŠé€ã‚Šãã ã•ã„ã€‚</p>
            </div>


            <div class="form-container">
                <h2>ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ </h2>
                <form action="#" method="post" onsubmit="handleContactForm(event)">
                    <div class="form-group">
                        <label for="name">ãŠåå‰ *</label>
                        <input type="text" id="name" name="name" required>
                    </div>
                    
                    
                    <div class="form-group">
                        <label for="email">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ *</label>
                        <input type="email" id="email" name="email" required>
                    </div>
                    
                    
                    <div class="form-group">
                        <label for="subject">ä»¶å *</label>
                        <select id="subject" name="subject" required>
                            <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
                            <option value="å‚åŠ ã«ã¤ã„ã¦">åŒçª“ä¼šã¸ã®å‚åŠ ã«ã¤ã„ã¦</option>
                            <option value="é€£çµ¡å…ˆå¤‰æ›´">é€£çµ¡å…ˆå¤‰æ›´ã®ã”é€£çµ¡</option>
                            <option value="å†™çœŸæä¾›">å†™çœŸæä¾›ã®ãŠç”³ã—å‡º</option>
                            <option value="åˆ©ç”¨æ–¹æ³•">ãƒ›ãƒ¼ãƒ ãƒšãƒ¼ã‚¸ã®åˆ©ç”¨æ–¹æ³•</option>
                            <option value="ä¼ç”»ææ¡ˆ">ã‚¤ãƒ™ãƒ³ãƒˆãƒ»ä¼ç”»ã®ã”ææ¡ˆ</option>
                            <option value="ãã®ä»–">ãã®ä»–</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="message">ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ *</label>
                        <textarea id="message" name="message" placeholder="ãŠå•ã„åˆã‚ã›å†…å®¹ã‚’ã”è¨˜å…¥ãã ã•ã„" required></textarea>
                    </div>
                    
                    <button type="submit" class="submit-button">é€ä¿¡</button>
                </form>
            </div>

        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; é«˜æ¾å¸‚ç«‹æ¡œç”ºä¸­å­¦æ ¡1976å¹´åº¦å’æ¥­åŒçª“ä¼š. All rights reserved.</p>
        </div>
    </footer>

    <script type="module">
        // Firebase imports
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { 
            getFirestore, 
            collection, 
            addDoc, 
            serverTimestamp 
        } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

        // Firebaseè¨­å®šã‚’ä½¿ç”¨
        const firebaseConfig = window.FIREBASE_CONFIG;

        // FirebaseåˆæœŸåŒ–
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        window.handleContactForm = async function(event) {
            event.preventDefault();
            
            const name = document.getElementById('name').value.trim();
            const email = document.getElementById('email').value.trim();
            const subject = document.getElementById('subject').value;
            const message = document.getElementById('message').value.trim();

            if (!name || !email || !subject || !message) {
                alert('å¿…é ˆé …ç›®ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                return;
            }

            // é€ä¿¡ãƒœã‚¿ãƒ³ã‚’ç„¡åŠ¹åŒ–
            const submitButton = event.target.querySelector('.submit-button');
            const originalText = submitButton.textContent;
            submitButton.disabled = true;
            submitButton.textContent = 'é€ä¿¡ä¸­...';

            try {
                // Firestoreã«ãŠå•ã„åˆã‚ã›ã‚’ä¿å­˜
                await addDoc(collection(db, 'contacts'), {
                    name: name,
                    email: email,
                    subject: subject,
                    message: message,
                    status: 'new',  // new, in_progress, resolved
                    createdAt: serverTimestamp(),
                    updatedAt: serverTimestamp()
                });

                // EmailJS ã§ç®¡ç†è€…é€šçŸ¥ãƒ¡ãƒ¼ãƒ«é€ä¿¡
                try {
                    await window.emailService.sendAdminNotification('new_contact', {
                        name: name,
                        email: email,
                        subject: subject,
                        message: message
                    });

                    console.log('Contact admin notification sent successfully');
                } catch (emailError) {
                    console.error('Contact admin notification failed (non-critical):', emailError);
                    // ãƒ¡ãƒ¼ãƒ«é€ä¿¡å¤±æ•—ã§ã‚‚Firestoreä¿å­˜ã¯æˆåŠŸã—ã¦ã„ã‚‹ã®ã§ç¶™ç¶š
                }

                alert('ãŠå•ã„åˆã‚ã›ã‚’é€ä¿¡ã„ãŸã—ã¾ã—ãŸã€‚\nå†…å®¹ã‚’ç¢ºèªæ¬¡ç¬¬ã€ã”é€£çµ¡ã„ãŸã—ã¾ã™ã€‚\nã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã—ãŸã€‚');
                
                // ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã‚¯ãƒªã‚¢
                document.getElementById('name').value = '';
                document.getElementById('email').value = '';
                document.getElementById('subject').value = '';
                document.getElementById('message').value = '';

            } catch (error) {
                console.error('Error submitting contact:', error);
                alert('é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãŠæ‰‹æ•°ã§ã™ãŒã€ã—ã°ã‚‰ãæ™‚é–“ã‚’ãŠã„ã¦å†åº¦ãŠè©¦ã—ãã ã•ã„ã€‚');
            } finally {
                // é€ä¿¡ãƒœã‚¿ãƒ³ã‚’å¾©å¸°
                submitButton.disabled = false;
                submitButton.textContent = originalText;
            }
        };
    </script>
    <!-- ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ -->
    <script src="assets/js/theme-switcher.js"></script>
</body>
</html>
