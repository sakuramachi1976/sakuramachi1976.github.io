<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®¡ç†è€…é€šçŸ¥ãƒ†ã‚¹ãƒˆ | æ¡œç”ºä¸­å­¦æ ¡1976å¹´å’æ¥­åŒçª“ä¼š</title>
    <link rel="stylesheet" href="assets/css/styles.css">
    <!-- EmailJS SDK -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
    <!-- EmailJS Service -->
    <script src="assets/js/emailjs-service.js"></script>
</head>
<body>
    <header>
        <div class="container">
            <h1>ç®¡ç†è€…é€šçŸ¥ãƒ†ã‚¹ãƒˆ</h1>
            <p class="subtitle">admin_notificationæ©Ÿèƒ½ã®å‹•ä½œç¢ºèª</p>
        </div>
    </header>

    <main class="page-content">
        <div class="container">
            <div class="content-section">
                <h2>ğŸ“§ ç®¡ç†è€…é€šçŸ¥ãƒ†ã‚¹ãƒˆ</h2>
                <div class="form-container">
                    <div style="background: #e6f3ff; padding: 15px; border-radius: 5px; margin-bottom: 20px;">
                        <h4>ç¾åœ¨ã®è¨­å®š:</h4>
                        <p><strong>Service ID:</strong> service_xtiqtyr</p>
                        <p><strong>Template ID:</strong> template_admin_notify</p>
                        <p><strong>Public Key:</strong> è¨­å®šæ¸ˆã¿</p>
                        <p><strong>ãƒ¢ãƒ¼ãƒ‰:</strong> ç®¡ç†è€…é€šçŸ¥ã®ã¿</p>
                    </div>

                    <h3>ãŠå•ã„åˆã‚ã›å—ä¿¡é€šçŸ¥ãƒ†ã‚¹ãƒˆ</h3>
                    <form onsubmit="testContactNotification(event)">
                        <div class="form-group">
                            <label for="contact-name">ãŠå•ã„åˆã‚ã›è€…å</label>
                            <input type="text" id="contact-name" value="ãƒ†ã‚¹ãƒˆå¤ªéƒ" required>
                        </div>
                        <div class="form-group">
                            <label for="contact-email">ãŠå•ã„åˆã‚ã›è€…ãƒ¡ãƒ¼ãƒ«</label>
                            <input type="email" id="contact-email" value="test@example.com" required>
                        </div>
                        <div class="form-group">
                            <label for="contact-subject">ä»¶å</label>
                            <select id="contact-subject" required>
                                <option value="å‚åŠ ã«ã¤ã„ã¦">åŒçª“ä¼šã¸ã®å‚åŠ ã«ã¤ã„ã¦</option>
                                <option value="é€£çµ¡å…ˆå¤‰æ›´">é€£çµ¡å…ˆå¤‰æ›´ã®ã”é€£çµ¡</option>
                                <option value="ãƒ†ã‚¹ãƒˆé€ä¿¡">ãƒ†ã‚¹ãƒˆé€ä¿¡</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="contact-message">ãŠå•ã„åˆã‚ã›å†…å®¹</label>
                            <textarea id="contact-message" required>ã“ã‚Œã¯ç®¡ç†è€…é€šçŸ¥ã®ãƒ†ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã§ã™ã€‚æ–°ã—ã„ãŠå•ã„åˆã‚ã›ãŒæ­£å¸¸ã«é€šçŸ¥ã•ã‚Œã‚‹ã‹ã‚’ç¢ºèªã—ã¦ã„ã¾ã™ã€‚</textarea>
                        </div>
                        <button type="submit" class="submit-button">ãŠå•ã„åˆã‚ã›é€šçŸ¥ãƒ†ã‚¹ãƒˆ</button>
                    </form>

                    <hr style="margin: 30px 0;">

                    <h3>å‡ºæ¬ ç¢ºèªå—ä¿¡é€šçŸ¥ãƒ†ã‚¹ãƒˆ</h3>
                    <form onsubmit="testRSVPNotification(event)">
                        <div class="form-group">
                            <label for="rsvp-name">å‚åŠ è€…å</label>
                            <input type="text" id="rsvp-name" value="ãƒ†ã‚¹ãƒˆèŠ±å­" required>
                        </div>
                        <div class="form-group">
                            <label for="rsvp-event">ã‚¤ãƒ™ãƒ³ãƒˆå</label>
                            <input type="text" id="rsvp-event" value="åŒçª“ä¼šç·ä¼š2025" required>
                        </div>
                        <div class="form-group">
                            <label for="rsvp-attendance">å‡ºæ¬ å›ç­”</label>
                            <select id="rsvp-attendance" required>
                                <option value="participate">å‚åŠ äºˆå®š</option>
                                <option value="not-participate">ä¸å‚åŠ </option>
                                <option value="undecided">æœªå®š</option>
                            </select>
                        </div>
                        <div class="form-group">
                            <label for="rsvp-comment">ã‚³ãƒ¡ãƒ³ãƒˆ</label>
                            <textarea id="rsvp-comment">æ¥½ã—ã¿ã«ã—ã¦ã„ã¾ã™ï¼</textarea>
                        </div>
                        <button type="submit" class="submit-button">å‡ºæ¬ å›ç­”é€šçŸ¥ãƒ†ã‚¹ãƒˆ</button>
                    </form>
                </div>
            </div>

            <div class="content-section">
                <h2>ğŸ“‹ ãƒ†ã‚¹ãƒˆçµæœ</h2>
                <div id="test-results" class="form-container">
                    <p>ãƒ†ã‚¹ãƒˆçµæœãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™ã€‚</p>
                </div>
            </div>

            <div class="content-section">
                <h2>âš™ï¸ ç®¡ç†è€…é€šçŸ¥ç”¨ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆè¨­å®š</h2>
                <div class="form-container">
                    <p>EmailJSãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§ä»¥ä¸‹ã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆã‚’ä½œæˆã—ã¦ãã ã•ã„ï¼š</p>
                    
                    <h4>Template Name:</h4>
                    <code>admin_notification_template</code>

                    <h4>Template ID:</h4>
                    <code>template_admin_notify</code>

                    <h4>Subjectï¼ˆä»¶åï¼‰:</h4>
                    <pre style="background: #f5f5f5; padding: 10px; border-radius: 5px;">ã€åŒçª“ä¼šã‚µã‚¤ãƒˆã€‘{{subject}}</pre>

                    <h4>Contentï¼ˆæœ¬æ–‡ï¼‰:</h4>
                    <pre style="background: #f5f5f5; padding: 10px; border-radius: 5px; white-space: pre-wrap;">ç®¡ç†è€… æ§˜

åŒçª“ä¼šã‚µã‚¤ãƒˆã‹ã‚‰æ–°ã—ã„é€šçŸ¥ãŒã‚ã‚Šã¾ã™ã€‚

{{message}}

â–  å¯¾å¿œã«ã¤ã„ã¦
ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã§è©³ç´°ã‚’ã”ç¢ºèªãã ã•ã„ã€‚

ç®¡ç†è€…ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰: [ã‚µã‚¤ãƒˆURL]/admin.html

é€šçŸ¥æ—¥æ™‚: {{timestamp}}

--
æ¡œç”ºä¸­å­¦æ ¡1976å¹´å’æ¥­åŒçª“ä¼šã‚µã‚¤ãƒˆè‡ªå‹•é€šçŸ¥</pre>

                    <h4>Template Settings:</h4>
                    <ul style="margin-left: 20px; line-height: 1.8;">
                        <li><strong>To Name:</strong> {{to_name}}</li>
                        <li><strong>From Name:</strong> æ¡œç”ºä¸­å­¦æ ¡1976å¹´å’æ¥­åŒçª“ä¼š</li>
                        <li><strong>To Email:</strong> ç®¡ç†è€…ã®ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</li>
                    </ul>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2025 æ¡œç”ºä¸­å­¦æ ¡1976å¹´å’æ¥­åŒçª“ä¼š. All rights reserved.</p>
        </div>
    </footer>

    <script>
        // ãŠå•ã„åˆã‚ã›é€šçŸ¥ãƒ†ã‚¹ãƒˆ
        async function testContactNotification(event) {
            event.preventDefault();
            
            const name = document.getElementById('contact-name').value;
            const email = document.getElementById('contact-email').value;
            const subject = document.getElementById('contact-subject').value;
            const message = document.getElementById('contact-message').value;

            const button = event.target.querySelector('.submit-button');
            button.disabled = true;
            button.textContent = 'ãƒ†ã‚¹ãƒˆé€ä¿¡ä¸­...';

            try {
                await window.emailService.sendAdminNotification('new_contact', {
                    name: name,
                    email: email,
                    subject: subject,
                    message: message
                });

                addTestResult('âœ… ãŠå•ã„åˆã‚ã›é€šçŸ¥ãƒ†ã‚¹ãƒˆæˆåŠŸ', `æ–°ã—ã„ãŠå•ã„åˆã‚ã›ã®ç®¡ç†è€…é€šçŸ¥ãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ã—ã¾ã—ãŸã€‚`);
            } catch (error) {
                console.error('Contact notification test failed:', error);
                addTestResult('âŒ ãŠå•ã„åˆã‚ã›é€šçŸ¥ãƒ†ã‚¹ãƒˆå¤±æ•—', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            } finally {
                button.disabled = false;
                button.textContent = 'ãŠå•ã„åˆã‚ã›é€šçŸ¥ãƒ†ã‚¹ãƒˆ';
            }
        }

        // å‡ºæ¬ ç¢ºèªé€šçŸ¥ãƒ†ã‚¹ãƒˆ
        async function testRSVPNotification(event) {
            event.preventDefault();
            
            const name = document.getElementById('rsvp-name').value;
            const eventName = document.getElementById('rsvp-event').value;
            const attendance = document.getElementById('rsvp-attendance').value;
            const comment = document.getElementById('rsvp-comment').value;

            const button = event.target.querySelector('.submit-button');
            button.disabled = true;
            button.textContent = 'ãƒ†ã‚¹ãƒˆé€ä¿¡ä¸­...';

            try {
                await window.emailService.sendAdminNotification('new_rsvp', {
                    userName: name,
                    eventName: eventName,
                    attendance: attendance,
                    comment: comment
                });

                addTestResult('âœ… å‡ºæ¬ ç¢ºèªé€šçŸ¥ãƒ†ã‚¹ãƒˆæˆåŠŸ', `æ–°ã—ã„å‡ºæ¬ å›ç­”ã®ç®¡ç†è€…é€šçŸ¥ãƒ¡ãƒ¼ãƒ«ã‚’é€ä¿¡ã—ã¾ã—ãŸã€‚`);
            } catch (error) {
                console.error('RSVP notification test failed:', error);
                addTestResult('âŒ å‡ºæ¬ ç¢ºèªé€šçŸ¥ãƒ†ã‚¹ãƒˆå¤±æ•—', `ã‚¨ãƒ©ãƒ¼: ${error.message}`);
            } finally {
                button.disabled = false;
                button.textContent = 'å‡ºæ¬ å›ç­”é€šçŸ¥ãƒ†ã‚¹ãƒˆ';
            }
        }

        // ãƒ†ã‚¹ãƒˆçµæœè¡¨ç¤º
        function addTestResult(title, message) {
            const resultsDiv = document.getElementById('test-results');
            const timestamp = new Date().toLocaleString('ja-JP');
            
            const resultHtml = `
                <div style="border: 1px solid #e2e8f0; padding: 15px; margin-bottom: 10px; border-radius: 5px; background: ${title.includes('âœ…') ? '#f0f8ff' : '#fff5f5'};">
                    <div style="font-weight: bold; margin-bottom: 5px;">${title}</div>
                    <div style="color: #666; font-size: 0.9rem;">${message}</div>
                    <div style="color: #999; font-size: 0.8rem; margin-top: 5px;">ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ: ${timestamp}</div>
                </div>
            `;

            resultsDiv.innerHTML = resultHtml + resultsDiv.innerHTML;
        }

        // ãƒšãƒ¼ã‚¸èª­ã¿è¾¼ã¿æ™‚ã®åˆæœŸåŒ–ç¢ºèª
        document.addEventListener('DOMContentLoaded', async function() {
            console.log('EmailJS Service initialized');
            console.log('Service configuration:', window.emailService.checkConfiguration());
            
            // åˆæœŸåŒ–çŠ¶æ…‹ã‚’ãƒã‚§ãƒƒã‚¯
            try {
                await window.emailService.init();
                addTestResult('â„¹ï¸ åˆæœŸåŒ–å®Œäº†', 'EmailJSã‚µãƒ¼ãƒ“ã‚¹ãŒæ­£å¸¸ã«åˆæœŸåŒ–ã•ã‚Œã¾ã—ãŸã€‚ç®¡ç†è€…é€šçŸ¥ãƒ†ã‚¹ãƒˆã‚’é–‹å§‹ã§ãã¾ã™ã€‚');
            } catch (error) {
                addTestResult('âš ï¸ åˆæœŸåŒ–ã‚¨ãƒ©ãƒ¼', `EmailJSã®åˆæœŸåŒ–ã«å¤±æ•—: ${error.message}`);
            }
        });
    </script>
    <!-- ãƒ†ãƒ¼ãƒåˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ -->
    <script src="assets/js/theme-switcher.js"></script>
</body>
</html>